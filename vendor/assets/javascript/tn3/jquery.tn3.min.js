/*!
 * tn3 v1.4.0.97
 * http://tn3gallery.com/
 *
 * License
 * http://tn3gallery.com/license
 *
 * Date: 01 Apr, 2013 21:48:35 +0300
 */
(function(g){function b(i){var l=i.skinDir+"/"+i.skin,k=f[l];if(k)k.loaded?a.call(this,i,k.html):k.queue.push({c:this,s:i});else{f[l]={loaded:false,queue:[{c:this,s:i}]};g.ajax({url:l+".html",dataType:"text",success:function(p){var u=f[l];u.loaded=true;u.html=p;for(p=0;p<u.queue.length;p++)a.call(u.queue[p].c,u.queue[p].s,u.html)},dataFilter:function(p){return p=p.substring(p.indexOf("<body>")+6,p.lastIndexOf("</body>"))},error:function(){if(i.error){var p=g.Event("tn3_error");p.description="tn3 skin load error";
i.error(p)}}})}return this}function a(i,l){this.each(function(){for(var k=g(this),p,u,v=l.indexOf("<img src=");v!=-1;){v+=10;u=l.indexOf('"',v);p=i.skinDir+"/"+l.substring(v,u);l=l.substr(0,v)+p+l.substr(u);v=l.indexOf("<img src=",v)}k.append(l);k.data("tn3").init(k,i.fullOnly)})}function c(i){var l=[],k=i.children(".tn3.album"),p,u;if(k.length>0)k.each(function(v){p=g(this);l[v]={title:p.find(":header").html()};g.extend(l[v],d(p));if(u=e(p)){l[v].imgs=u;if(!l[v].thumb)l[v].thumb=l[v].imgs[0].thumb}});
else if(u=e(i))l[0]={imgs:u};return l}function e(i){var l=[],k,p;k=i.children("ol,ul").children("li");if(k.length>0)k.each(function(u){p=g(this);$firsta=p.find("a:not(.tn3 > a)").filter(":first");l[u]={title:p.find(":header").filter(":first").html()};if($firsta.length>0){l[u].img=$firsta.attr("href");l[u].thumb=$firsta.find("img").attr("src")}else l[u].img=p.find("img").filter(":first").attr("src");g.extend(l[u],d(p));l[u].alt=p.find("img").filter(":first").attr("alt")||l[u].title});else{k=i.find("img");
k.each(function(u){p=g(this);$at=p.parent("a");l[u]=$at.length==0?{title:p.attr("title"),img:p.attr("src")}:{title:p.attr("title"),img:$at.attr("href"),thumb:p.attr("src")};l[u].alt=p.attr("alt")||l[u].title})}if(l.length==0)return null;return l}function d(i){var l={};i=i.children(".tn3");var k;g.each(i,function(){k=g(this);l[k.attr("class").substr(4)]=k.html()});return l}function h(i){g('a[href^="#tn3-'+i+'"]').click(function(l){var k=m[i];l=g(l.currentTarget).attr("href");l=l.substr(l.indexOf("-",
5)+1);l=l.split("-");switch(l[0]){case "next":k.cAlbum!=null&&k.show("next",l[1]=="fs");break;case "prev":k.cAlbum!=null&&k.show("prev",l[1]=="fs");break;default:k.cAlbum!=parseInt(l[0])?k.showAlbum(parseInt(l[0]),parseInt(l[1]),l[2]=="fs"):k.show(parseInt(l[1]),l[2]=="fs")}})}function j(){if(m.length==0){var i=g(".tn3gallery");i.length>0&&i.tn3({})}}if(/1\.(0|1|2|3|4)\.(0|1)/.test(g.fn.jquery)||/^1.1/.test(g.fn.jquery)||/^1.2/.test(g.fn.jquery)||/^1.3/.test(g.fn.jquery))alert("tn3gallery requires jQuery v1.4.2 or later!  You are using v"+
g.fn.jquery);else{var f={},m=[];g.fn.tn3=function(i){i=g.extend(true,{},g.fn.tn3.config,i);if(i.skin!=null)if(typeof i.skin=="object"){i.skinDir+="/"+i.skin[0];if(i.cssID==null)i.cssID=i.skin[0];i.skin=i.skin[1]}else i.skinDir+="/"+i.skin;else{i.skin="tn3";i.skinDir+="/tn3";g.fn.tn3.dontLoad=true}if(i.cssID==null)i.cssID=i.skin==null?"tn3":i.skin;this.each(function(){var l=g(this);i.fullOnly?l.hide():l.css("visibility","hidden");var k=i.data?i.data:c(l);k=m.push(new g.fn.tn3.Gallery(k,i))-1;l.data("tn3",
m[k]);for(var p=0;p<g.fn.tn3.plugins.length;p++)g.fn.tn3.plugins[p].init(l,i,m[k]);l.empty();h(k)});g.fn.tn3.dontLoad?a.call(this,i,i.skinDefault):b.call(this,i);return this};g.fn.tn3.plugins=[];g.fn.tn3.plugIn=function(i,l){g.fn.tn3.plugins.push({id:i,init:l})};g.fn.tn3.version="1.4.0.97";g.fn.tn3.config={data:null,skin:null,skinDir:"skins",skinDefault:'<div class="tn3-gallery"><div class="tn3-image"><div class="tn3-text-bg"><div class="tn3-image-title"></div><div class="tn3-image-description"></div></div><div class="tn3-next tn3_v tn3_o"></div><div class="tn3-prev tn3_v tn3_o"></div><div class="tn3-preloader tn3_h tn3_v"><img src="preload.gif"/></div><div class="tn3-timer"></div></div><div class="tn3-controls-bg tn3_rh"><div class="tn3-sep1"></div><div class="tn3-sep2"></div><div class="tn3-sep3"></div></div><div class="tn3-thumbs"></div><div class="tn3-fullscreen"></div><div class="tn3-show-albums"></div><div class="tn3-next-page"></div><div class="tn3-prev-page"></div><div class="tn3-play"></div><div class="tn3-count"></div><div class="tn3-albums"><div class="tn3-inalbums"><div class="tn3-album"></div></div><div class="tn3-albums-next"></div><div class="tn3-albums-prev"></div><div class="tn3-albums-close"></div></div></div>',
cssID:null};g.fn.tn3.translations={};g.fn.tn3.translate=function(i,l){if(l)g.fn.tn3.translations[i]=l;else{var k=g.fn.tn3.translations[i];return k?k:i}};g(function(){setTimeout(j,1)})}})(jQuery);
(function(g){g.fn.tn3utils=U={};U.shuffle=function(b){var a,c,e=b.length;if(e)for(;--e;){c=Math.floor(Math.random()*(e+1));a=b[c];b[c]=b[e];b[e]=a}};g.extend(g.easing,{def:"easeOutQuad",swing:function(b,a,c,e,d){return g.easing[g.easing.def](b,a,c,e,d)},linear:function(b,a,c,e,d){return e*a/d+c},easeInQuad:function(b,a,c,e,d){return e*(a/=d)*a+c},easeOutQuad:function(b,a,c,e,d){return-e*(a/=d)*(a-2)+c},easeInOutQuad:function(b,a,c,e,d){if((a/=d/2)<1)return e/2*a*a+c;return-e/2*(--a*(a-2)-1)+c},easeInCubic:function(b,
a,c,e,d){return e*(a/=d)*a*a+c},easeOutCubic:function(b,a,c,e,d){return e*((a=a/d-1)*a*a+1)+c},easeInOutCubic:function(b,a,c,e,d){if((a/=d/2)<1)return e/2*a*a*a+c;return e/2*((a-=2)*a*a+2)+c},easeInQuart:function(b,a,c,e,d){return e*(a/=d)*a*a*a+c},easeOutQuart:function(b,a,c,e,d){return-e*((a=a/d-1)*a*a*a-1)+c},easeInOutQuart:function(b,a,c,e,d){if((a/=d/2)<1)return e/2*a*a*a*a+c;return-e/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(b,a,c,e,d){return e*(a/=d)*a*a*a*a+c},easeOutQuint:function(b,a,c,
e,d){return e*((a=a/d-1)*a*a*a*a+1)+c},easeInOutQuint:function(b,a,c,e,d){if((a/=d/2)<1)return e/2*a*a*a*a*a+c;return e/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(b,a,c,e,d){return-e*Math.cos(a/d*(Math.PI/2))+e+c},easeOutSine:function(b,a,c,e,d){return e*Math.sin(a/d*(Math.PI/2))+c},easeInOutSine:function(b,a,c,e,d){return-e/2*(Math.cos(Math.PI*a/d)-1)+c},easeInExpo:function(b,a,c,e,d){return a==0?c:e*Math.pow(2,10*(a/d-1))+c},easeOutExpo:function(b,a,c,e,d){return a==d?c+e:e*(-Math.pow(2,-10*a/
d)+1)+c},easeInOutExpo:function(b,a,c,e,d){if(a==0)return c;if(a==d)return c+e;if((a/=d/2)<1)return e/2*Math.pow(2,10*(a-1))+c;return e/2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(b,a,c,e,d){return-e*(Math.sqrt(1-(a/=d)*a)-1)+c},easeOutCirc:function(b,a,c,e,d){return e*Math.sqrt(1-(a=a/d-1)*a)+c},easeInOutCirc:function(b,a,c,e,d){if((a/=d/2)<1)return-e/2*(Math.sqrt(1-a*a)-1)+c;return e/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(b,a,c,e,d){b=1.70158;var h=0,j=e;if(a==0)return c;if((a/=
d)==1)return c+e;h||(h=d*0.3);if(j<Math.abs(e)){j=e;b=h/4}else b=h/(2*Math.PI)*Math.asin(e/j);return-(j*Math.pow(2,10*(a-=1))*Math.sin((a*d-b)*2*Math.PI/h))+c},easeOutElastic:function(b,a,c,e,d){b=1.70158;var h=0,j=e;if(a==0)return c;if((a/=d)==1)return c+e;h||(h=d*0.3);if(j<Math.abs(e)){j=e;b=h/4}else b=h/(2*Math.PI)*Math.asin(e/j);return j*Math.pow(2,-10*a)*Math.sin((a*d-b)*2*Math.PI/h)+e+c},easeInOutElastic:function(b,a,c,e,d){b=1.70158;var h=0,j=e;if(a==0)return c;if((a/=d/2)==2)return c+e;h||
(h=d*0.3*1.5);if(j<Math.abs(e)){j=e;b=h/4}else b=h/(2*Math.PI)*Math.asin(e/j);if(a<1)return-0.5*j*Math.pow(2,10*(a-=1))*Math.sin((a*d-b)*2*Math.PI/h)+c;return j*Math.pow(2,-10*(a-=1))*Math.sin((a*d-b)*2*Math.PI/h)*0.5+e+c},easeInBack:function(b,a,c,e,d,h){if(h==undefined)h=1.70158;return e*(a/=d)*a*((h+1)*a-h)+c},easeOutBack:function(b,a,c,e,d,h){if(h==undefined)h=1.70158;return e*((a=a/d-1)*a*((h+1)*a+h)+1)+c},easeInOutBack:function(b,a,c,e,d,h){if(h==undefined)h=1.70158;if((a/=d/2)<1)return e/2*
a*a*(((h*=1.525)+1)*a-h)+c;return e/2*((a-=2)*a*(((h*=1.525)+1)*a+h)+2)+c},easeInBounce:function(b,a,c,e,d){return e-g.easing.easeOutBounce(b,d-a,0,e,d)+c},easeOutBounce:function(b,a,c,e,d){return(a/=d)<1/2.75?e*7.5625*a*a+c:a<2/2.75?e*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?e*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:e*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(b,a,c,e,d){if(a<d/2)return g.easing.easeInBounce(b,a*2,0,e,d)*0.5+c;return g.easing.easeOutBounce(b,a*2-d,0,e,d)*0.5+e*
0.5+c}})})(jQuery);
(function(g){g.fn.tn3.Gallery=function(d,h){this.data=d;this.config=g.extend(true,{},g.fn.tn3.Gallery.config,h);this.initialized=false;this.t=g.fn.tn3.translate;this.loader=new g.fn.tn3.External(h.external,this)};g.fn.tn3.Gallery.config={cssID:"tn3",active:[],inactive:[],iniAlbum:0,iniImage:0,imageClick:"next",startWithAlbums:false,autoplay:false,delay:7E3,timerMode:"bar",timerSteps:300,timerStepChar:"&#8226;",isFullScreen:false,fullOnly:false,width:null,height:null,mouseWheel:true,keyNavigation:"fullscreen",
timerOverStop:true,responsive:false,useNativeFullScreen:true,autohideControls:false,autohideOver:true,overFadeDuration:300,spinjs:null,image:{},thumbnailer:{},touch:{}};g.fn.tn3.Gallery.prototype={config:null,$c:null,$tn3:null,data:null,thumbnailer:null,imager:null,cAlbum:null,timer:null,items:null,initialized:null,n:null,albums:null,loader:null,fso:null,timerSize:null,special:null,areHidden:false,$inImage:null,isPlaying:false,cparent:null,spinner:null,showInit:false,init:function(d,h){this.$c=d;
if(!(this.loader.reqs>0||this.data.length==0||h)){this.trigger("init_start");this.config.useNativeFullScreen=this.config.useNativeFullScreen&&b.supportsFullScreen;this.config.fullOnly&&this.$c.show();this.$c.css("visibility","visible");this.$tn3=this.$c.find("."+this.config.cssID+"-gallery");var j=this.config.initValues={width:this.$tn3.width(),height:this.$tn3.height()};this.$tn3.css("float","left");j.wDif=this.$tn3.outerWidth(true)-j.width;j.hDif=this.$tn3.outerHeight(true)-j.height;this.config.mouseWheel&&
this.initMouseWheel();var f=this;this.timer=new g.fn.tn3.Timer(this.$c,this.config.delay,this.config.timerSteps);this.$c.bind("tn3_timer_end",function(){f.show("next")});this.special={rv:[],rh:[],v:[],h:[],vi:[],hi:[],o:[],x:{}};this.parseLayout();this.center();g.each(this.items,function(m,i){switch(m){case "next":i.click(function(k){f.show("next");k.stopPropagation()});i.attr("title",f.t("Next Image"));break;case "prev":i.click(function(k){f.show("prev");k.stopPropagation()});i.attr("title",f.t("Previous Image"));
break;case "next-page":i.click(function(){f.items.thumbs&&f.thumbnailer.next(true)});i.attr("title",f.t("Next Page"));break;case "prev-page":i.click(function(){f.items.thumbs&&f.thumbnailer.prev(true)});i.attr("title",f.t("Previous Page"));break;case "thumbs":f.config.thumbnailer.cssID=f.config.cssID;f.config.thumbnailer.initValues={width:i.width(),height:i.height()};f.config.thumbnailer.initValues.vertical=i.width()<=i.height();i.bind("tn_click",function(k){f.show(k.n)}).bind("tn_over",function(){f.timer.pause(true)}).bind("tn_out",
function(){f.timer.pause(false)}).bind("tn_error",function(k){f.trigger("error",k)});break;case "image":f.config.image.cssID=f.config.cssID;f.config.image.initValues={width:i.width(),height:i.height()};i.bind("img_click",function(k){switch(f.config.imageClick){case "next":f.show("next");break;case "fullscreen":f.fullscreen(true);break;case "url":if(k=f.data[f.cAlbum].imgs[k.n].url.replace(/&amp;/g,"&"))window.location=k}}).bind("img_load_start",function(){f.displayPreloader(true)}).bind("img_load_end",
function(k){f.n=k.n;f.displayPreloader(false);f.items.timer&&f.items.timer.hide();f.$inImage&&f.$inImage.hide()}).bind("img_transition",function(k){f.setTextValues(false,"image");f.items.thumbs&&f.thumbnailer.thumbClick(f.n);f.$inImage&&f.imager.cached[k.n].isImage&&f.$inImage.fadeIn(300);f.items.count&&f.items.count.text(f.n+1+"/"+f.data[f.cAlbum].imgs.length);f.isPlaying&&f.timer.start();f.special.o.length>0&&f.config.autohideOver&&f.hideElements();if(f.config.autohideControls){if(f.items.prev)f.items.prev[k.n==
0?"hide":"show"]();if(f.items.next)f.items.next[k.n==f.imager.data.length-1?"hide":"show"]()}}).bind("img_enter",function(){f.imageEnter()}).bind("img_leave",function(){f.imageLeave()}).bind("img_resize",function(k){if(f.$inImage){f.$inImage.width(k.w).height(k.h).css("left",k.left).css("top",k.top);f.center();f.imager.bindMouseEvents(f.$inImage)}}).bind("img_error",function(k){f.trigger("error",k)});break;case "preloader":f.config.spinjs&&i.find("img").remove();f.displayPreloader(false);break;case "timer":var l=
i.width()>i.height()?"width":"height";f.$c.bind("timer_tick",function(k){if(f.config.timerMode=="char"){for(var p=f.config.timerStepChar;--k.tick;)p+=f.config.timerStepChar;f.items.timer.html(p)}else f.items.timer[l](f.timerSize/k.totalTicks*k.tick);f.trigger(k.type,k)}).bind("timer_start",function(k){f.timerSize=f.$inImage[l]();f.items.timer.fadeIn(300);f.items.play&&f.items.play.addClass(f.config.cssID+"-play-active");f.trigger(k.type,k)}).bind("timer_end timer_stop",function(k){f.items.timer.hide();
k.type=="timer_end"&&f.n==f.data[f.cAlbum].imgs.length-1&&f.trigger("autoplay_finish");f.trigger(k.type,k)});i.hide();break;case "play":i.click(function(k){var p={id:"play",execute:true};f.trigger("control",p);if(f.isPlaying){if(p.execute){f.timer.stop();i.removeClass(f.config.cssID+"-play-active");i.attr("title",f.t("Start Slideshow"))}f.isPlaying=false}else{if(p.execute){f.timer.start();i.addClass(f.config.cssID+"-play-active");i.attr("title",f.t("Stop Slideshow"))}f.isPlaying=true}k.stopPropagation()});
i.attr("title",f.t("Start Slideshow"));break;case "count":break;case "albums":f.albums=new g.fn.tn3.Albums(f.data,i,f.config.cssID);i.hide();i.bind("albums_binit",function(k){f.trigger(k.type,k)}).bind("albums_click",function(k){f.showAlbum(k.n);f.trigger(k.type,k)}).bind("albums_init",function(k){f.timer.pause(true);f.trigger(k.type,k)}).bind("albums_error",function(k){f.trigger("error",k)}).bind("albums_close",function(){f.timer.pause(false)});break;case "album":break;case "albums-next":f.albums&&
f.albums.setControl("next",i);i.attr("title",f.t("Next Album Page"));break;case "albums-prev":f.albums&&f.albums.setControl("prev",i);i.attr("title",f.t("Previous Album Page"));break;case "albums-close":f.albums&&f.albums.setControl("close",i);i.attr("title",f.t("Close"));break;case "show-albums":i.click(function(k){f.items.albums&&f.albums.show(0,f.cAlbum,false,true);k.stopPropagation()});i.attr("title",f.t("Album List"));break;case "fullscreen":i.click(function(k){var p={id:"fullscreen",execute:true};
f.trigger("control",p);p.execute&&f.fullscreen(true);k.stopPropagation()});i.attr("title",f.t("Maximize"));break;default:f.special.x[m]&&i.click(function(k){var p=!f.items[f.special.x[m]].is(":visible"),u={id:m,execute:true,active:p};f.trigger("control",u);if(u.execute){p?i.addClass(f.config.cssID+"-"+m+"-active"):i.removeClass(f.config.cssID+"-"+m+"-active");f.items[f.special.x[m]].toggle()}k.stopPropagation()})}});if(this.config.width!==null||this.config.height!==null){if(this.config.width==null)this.config.width=
this.config.initValues.width;if(this.config.height==null)this.config.height=this.config.initValues.height;this.resize(this.config.width,this.config.height)}j=Math.min(this.config.iniAlbum,this.data.length-1);this.config.responsive!==false&&this.initResponsive(this.config.responsive);this.initialized=true;this.config.startWithAlbums&&this.data.length>1&&this.items.albums?this.albums.show():this.showAlbum(j,this.config.iniImage);this.config.isFullScreen&&this.onFullResize();this.config.keyNavigation==
"always"&&g(document).bind("keyup",g.proxy(this.listenKeys,this));if(this.config.autoplay)this.items.play?this.items.play.click():this.timer.start();this.trigger("init")}},parseLayout:function(){var d=this.items={},h=this.config,j=h.active,f=h.inactive,m=h.cssID.length+1,i=this,l=/MSIE/.test(navigator.userAgent),k,p;this.$c.find("div[class^='"+h.cssID+"-']").each(function(){k=g(this);p=k.attr("class").split(" ")[0].substr(m);if(g.inArray(p,f)!=-1)k.remove();else if(j.length==0||g.inArray(p,j)!=-1)d[p]=
k;else p!="gallery"&&k.remove();if(k.parent().hasClass(h.cssID+"-image")){if(!i.$inImage){i.$inImage=g('<div class="tn3-in-image"></div>');k.parent().append(i.$inImage);if(l){var u=g("<div />");u.css("background-color","#fff").css("opacity",0).css("width","100%").css("height","100%");u.appendTo(i.$inImage)}i.$inImage.css("position","absolute").width(d.image.width()).height(d.image.height())}k.appendTo(i.$inImage)}this.className.indexOf("tn3_")!=-1&&i.addSpecial(p,this.className)})},addSpecial:function(d,
h){for(var j=h.split(" "),f,m=0;m<j.length;m++){f=j[m].split("_");if(f[0]=="tn3")if(f[1]=="x")this.special.x[d]=f[2];else{this.special[f[1]].push(d);if(f[1]=="rh"||f[1]=="rv")this.config.initValues[d]={w:this.items[d].width(),h:this.items[d].height()}}}},initHover:function(d,h){var j=this;d.hover(function(){d.addClass(j.config.cssID+"-"+h+"-over")},function(){d.removeClass(j.config.cssID+"-"+h+"-over")})},setTextValues:function(d,h){var j,f,m,i=h+"-";for(m in this.items)if(m.indexOf(i)==0){j=m.substr(i.length);
if(j!="info"&&j!="prev"&&j!="next"){f=h=="image"?this.data[this.cAlbum].imgs[this.n]:this.data[this.cAlbum];if(!f||f[j]==undefined){f={};f[j]=""}else f[j]=g.trim(f[j]);j={field:j,text:f[j],data:f};this.trigger("set_text",j);if(d||j.text==undefined||j.text.length==0){this.items[m].html("");this.items[m].hide()}else{this.items[m].html(j.text);this.items[m].show()}}}},show:function(d,h){this.timer.stop();this.showInit=true;this.imager&&this.imager.show(d);h&&this.fullscreen()},setAlbumData:function(d,
h){if(h)this.trigger("error",{description:h});else{for(var j=0,f=d.length;j<f;j++)this.data.push(d[j]);this.$c&&this.init(this.$c,this.config.fullOnly)}},setImageData:function(d,h,j){if(j)this.trigger("error",{description:j});else{this.displayPreloader(false);d={data:d};this.trigger("image_data",d);this.data[h].imgs=d.data;if(this.cAlbum==h)this.rebuild(d.data,this.showInit?0:this.config.iniImage)}},showAlbum:function(d,h,j){if(this.initialized){if(d>this.data.length)return;this.timer.stop();this.cAlbum=
d;this.albums&&this.albums.hide();if(this.data[this.cAlbum].imgs===undefined)if(this.loader){this.loader.getImages(this.data[this.cAlbum].adata,this.cAlbum);this.displayPreloader(true)}else this.trigger("error",{description:"Wrong album id"});else this.rebuild(this.data[this.cAlbum].imgs,h)}else{this.config.iniAlbum=d;this.config.iniImage=h;this.init(this.$c,false)}j&&this.fullscreen()},rebuild:function(d,h){if(this.items.thumbs)if(this.thumbnailer)this.thumbnailer.rebuild(d);else this.thumbnailer=
new g.fn.tn3.Thumbnailer(this.items.thumbs,d,this.config.thumbnailer);if(this.items.image)if(this.imager)this.imager.rebuild(d);else this.imager=new g.fn.tn3.Imager(this.items.image,d,this.config.image);this.setTextValues(true,"image");this.setTextValues(false,"album");this.trigger("rebuild",{album:this.cAlbum});this.show(h==null?0:h)},showElements:function(d){if(this.areHidden){var h=this,j;g.each(this.special.o,function(f,m){if(h.config.autohideControls){if(m=="prev"&&h.n==0)return true;if(m=="next"&&
h.n==h.imager.data.length-1)return true}j=h.items[m];j.show();if(d&&g.support.opacity){j.stop(true);j.css("opacity",0);j.animate({opacity:1},{duration:d,queue:false})}});this.areHidden=false}},hideElements:function(d){if(!this.areHidden){var h=this,j;g.each(this.special.o,function(f,m){j=h.items[m];if(d&&g.support.opacity){j.stop(true);j.animate({opacity:0},{duration:d,complete:function(){j.hide()},queue:false})}else j.hide()});this.areHidden=true}},setData:function(d){if(this.items.thumbs)this.thumbnailer.data=
d;if(this.items.imager)this.imager.data=d},exitFullScreen:function(){!b.isFullScreen()&&this.config.isFullScreen&&this.fullscreen()},nativeFS:false,fullscreen:function(d){if(this.config.isFullScreen){if(this.config.useNativeFullScreen&&this.nativeFS){b.cancelFullScreen(this.$c);document.removeEventListener(b.fullScreenEventName,g.proxy(this.exitFullScreen,this))}else{g(window).unbind("resize",this.onFullResize);g.tn3unblock()}if(this.config.responsive!==false)this.initResponsive(this.config.responsive);
else this.config.width!==null||this.config.height!==null?this.resize(this.config.width,this.config.height):this.resize(this.config.initValues.width,this.config.initValues.height);if(this.items.fullscreen){this.items.fullscreen.removeClass(this.config.cssID+"-fullscreen-active");this.items.fullscreen.attr("title",this.t("Maximize"))}this.config.fullOnly&&this.$c.hide();this.config.isFullScreen=false;this.trigger("fullscreen",{fullscreen:false});this.config.keyNavigation=="fullscreen"&&g(document).unbind("keyup",
this.listenKeys)}else{if(this.config.useNativeFullScreen&&d){document.addEventListener(b.fullScreenEventName,g.proxy(this.exitFullScreen,this),true);b.requestFullScreen(this.$tn3);this.nativeFS=true}else{g.tn3block({message:this.$tn3,cssID:this.config.cssID});g(window).bind("resize",g.proxy(this.onFullResize,this));this.nativeFS=false}this.config.fullOnly&&this.$c.show();this.config.isFullScreen=true;if(this.items.fullscreen){this.items.fullscreen.addClass(this.config.cssID+"-fullscreen-active");
this.items.fullscreen.attr("title",this.t("Minimize"))}this.onFullResize();this.config.keyNavigation=="fullscreen"&&g(document).bind("keyup",g.proxy(this.listenKeys,this));this.trigger("fullscreen",{fullscreen:true})}},listenKeys:function(d){if(d.keyCode==70)this.items.fullscreen.click();else if(this.items.albums&&this.albums.enabled){var h=0;switch(d.keyCode){case 27:this.albums.hide();break;case 39:h="r";break;case 37:h="l";break;case 38:h="u";break;case 40:h="d";break;case 32:h="p"}h&&this.albums.select(h)}else switch(d.keyCode){case 27:this.config.isFullScreen&&
this.fullscreen(true);break;case 39:this.show("next");break;case 37:this.show("prev");break;case 38:this.items.albums&&this.albums.show(0,this.cAlbum,false,true);break;case 32:this.items.play.click()}},onFullResize:function(){if(this.config.useNativeFullScreen&&this.nativeFS)this.resize(window.screen.width,window.screen.height);else{var d=g(window),h=d.width();d=d.height();h-=this.config.initValues.wDif;d-=this.config.initValues.hDif;this.resize(h,d)}},resize:function(d,h){this.$tn3.width(d).height(h);
var j=d-this.config.initValues.width,f=h-this.config.initValues.height,m,i,l=this;if(this.items.image){m=this.config.image.initValues.width+j;i=this.config.image.initValues.height+f;if(this.imager)this.imager.setSize(m,i);else{this.items.image.width(m).height(i);this.$inImage.width(m).height(i)}}if(this.items.thumbs){m=this.config.thumbnailer.initValues.width+j;i=this.config.thumbnailer.initValues.height+f;if(this.thumbnailer)this.thumbnailer.setSize(m,i);else this.config.thumbnailer.initValues.vertical?
this.items.thumbs.height(i):this.items.thumbs.width(m)}if(this.items.albums){m=this.albums.initValues.width+j;i=this.albums.initValues.height+f;this.albums.changeSize(j,f)}g.each(this.special.rh,function(k,p){l.items[p].width(l.config.initValues[p].w+j)});g.each(this.special.rv,function(k,p){l.items[p].height(l.config.initValues[p].h+f)});this.center()},center:function(){var d,h=this,j=h.items.image.position();g.each(this.special.v,function(f,m){d=h.items[m];d.css("top",(d.parent().height()-d.height())/
2)});g.each(this.special.h,function(f,m){d=h.items[m];d.css("left",(d.parent().width()-d.width())/2)});g.each(this.special.vi,function(f,m){d=h.items[m];d.css("top",j.top+(h.items.image.height()-d.height())/2)});g.each(this.special.hi,function(f,m){d=h.items[m];d.css("left",j.left+(h.items.image.width()-d.width())/2)});if(this.spinner){this.displayPreloader(true);this.displayPreloader(false)}},trigger:function(d,h){var j=g.Event("tn3_"+d),f;for(f in h)j[f]=h[f];if(h&&h.type!=undefined)j.type="tn3_"+
d;j.source=this;this.$c.trigger(j);this.config[d]&&this.config[d].call(this,j);for(f in h)h[f]=j[f]},initMouseWheel:function(){var d=this,h=function(j){d.show((j.originalEvent.detail?-j.originalEvent.detail:j.originalEvent.wheelDelta)>0?"prev":"next");j.preventDefault()};this.$tn3.bind("mousewheel",h);this.$tn3.bind("DOMMouseScroll",h)},initResponsive:function(d){var h;if(typeof d=="number"){var j=g(window);h=function(){var u=j.width(),v=j.height();this.resize(u*d/100,v*d/100)}}else if(g.isFunction(d))h=
d;else if(d!==false){var f=this.$c.parent(),m=(this.config.width==null?this.config.initValues.width:this.config.width)/(this.config.height==null?this.config.initValues.height:this.config.height),i=f.width(),l=f.height();h=d=="enabled"?function(){i=f.width();l=f.height();this.resize(i,l)}:d=="height"?function(){l=f.height();i=l*m;this.resize(i,l)}:function(){i=f.width();l=i/m;this.resize(i,l)}}var k=this,p=function(){if(k.config.useNativeFullScreen)k.config.isFullScreen||g.proxy(h,k)();else g.proxy(h,
k)()};g(window).bind("resize",p);p()},replaceMenu:function(d,h){var j='<div style="position:absolute;background-color:#fff;color: #000;padding:0px 4px 0px 4px;z-index:1010;font-family:sans-serif;font-size:12px;">&copy; <a href="'+h+'">'+d+"</a></div>";this.$tn3.bind("contextmenu",function(f){f.preventDefault()}).bind("mousedown",function(f){if(f.which==3){var m=g(j);g("body").append(m);m.css("left",f.pageX).css("top",f.pageY);m.find("a").mouseup(function(i){window.location=h;m.unbind(i)});g("body").mouseup(function(i){m.remove();
g("body").unbind(i)})}})},imageEnter:function(){this.config.timerOverStop&&this.timer.pause(true);this.special.o.length>0&&this.showElements(this.config.overFadeDuration)},imageLeave:function(){this.config.timerOverStop&&this.timer.pause(false);this.special.o.length>0&&this.hideElements(this.config.overFadeDuration)},displayPreloader:function(d){if(this.items.preloader)if(d){this.items.preloader.show();if(this.config.spinjs)if(this.spinner)this.spinner.spin(this.items.preloader[0]);else this.spinner=
(new Spinner(this.config.spinjs)).spin(this.items.preloader[0])}else{this.spinner&&this.spinner.stop();this.items.preloader.hide()}}};var b={supportsFullScreen:false,isFullScreen:function(){return false},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},a="webkit moz o ms khtml".split(" ");if(typeof document.cancelFullScreen!="undefined")b.supportsFullScreen=true;else for(var c=0,e=a.length;c<e;c++){b.prefix=a[c];if(typeof document[b.prefix+"CancelFullScreen"]!=
"undefined"){b.supportsFullScreen=true;break}}if(b.supportsFullScreen){b.fullScreenEventName=b.prefix+"fullscreenchange";b.isFullScreen=function(){switch(this.prefix){case "":return document.fullScreen;case "webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}};b.requestFullScreen=function(d){this.prefix==="webkit"&&d.css("float","none");return this.prefix===""?d[0].requestFullScreen():d[0][this.prefix+"RequestFullScreen"]()};b.cancelFullScreen=function(d){this.prefix===
"webkit"&&d.css("float","left");return this.prefix===""?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}}})(jQuery);
(function(g,b,a){function c(r,q){var s=b.createElement(r||"div"),t;for(t in q)s[t]=q[t];return s}function e(r){for(var q=1,s=arguments.length;q<s;q++)r.appendChild(arguments[q]);return r}function d(r,q,s,t){var w=["opacity",q,~~(r*100),s,t].join("-");s=0.01+s/t*100;t=Math.max(1-(1-r)/q*(100-s),r);var x=k.substring(0,k.indexOf("Animation")).toLowerCase();x=x&&"-"+x+"-"||"";return l[w]||(p.insertRule("@"+x+"keyframes "+w+"{0%{opacity:"+t+"}"+s+"%{opacity:"+r+"}"+(s+0.01)+"%{opacity:1}"+(s+q)%100+"%{opacity:"+
r+"}100%{opacity:"+t+"}}",p.cssRules.length),l[w]=1),w}function h(r,q){var s=r.style,t,w;if(s[q]!==a)return q;q=q.charAt(0).toUpperCase()+q.slice(1);for(w=0;w<i.length;w++){t=i[w]+q;if(s[t]!==a)return t}}function j(r,q){for(var s in q)r.style[h(r,s)||s]=q[s];return r}function f(r){for(var q=1;q<arguments.length;q++){var s=arguments[q],t;for(t in s)r[t]===a&&(r[t]=s[t])}return r}function m(r){for(var q={x:r.offsetLeft,y:r.offsetTop};r=r.offsetParent;){q.x+=r.offsetLeft;q.y+=r.offsetTop}return q}var i=
["webkit","Moz","ms","O"],l={},k,p=function(){var r=c("style",{type:"text/css"});return e(b.getElementsByTagName("head")[0],r),r.sheet||r.styleSheet}(),u={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto"},v=function r(q){if(!this.spin)return new r(q);this.opts=f(q||{},r.defaults,u)};v.defaults={};f(v.prototype,{spin:function(r){this.stop();var q=this,s=q.opts,t=q.el=j(c(0,{className:s.className}),
{position:"relative",width:0,zIndex:s.zIndex}),w=s.radius+s.length+s.width,x,z;r&&(r.insertBefore(t,r.firstChild||null),z=m(r),x=m(t),j(t,{left:(s.left=="auto"?z.x-x.x+(r.offsetWidth>>1):parseInt(s.left,10)+w)+"px",top:(s.top=="auto"?z.y-x.y+(r.offsetHeight>>1):parseInt(s.top,10)+w)+"px"}));t.setAttribute("aria-role","progressbar");q.lines(t,q.opts);if(!k){var A=0,y=s.fps,B=y/s.speed,D=(1-s.opacity)/(B*s.trail/100),E=B/s.lines;(function F(){A++;for(var C=s.lines;C;C--)q.opacity(t,s.lines-C,Math.max(1-
(A+C*E)%B*D,s.opacity),s);q.timeout=q.el&&setTimeout(F,~~(1E3/y))})()}return q},stop:function(){var r=this.el;return r&&(clearTimeout(this.timeout),r.parentNode&&r.parentNode.removeChild(r),this.el=a),this},lines:function(r,q){function s(x,z){return j(c(),{position:"absolute",width:q.length+q.width+"px",height:q.width+"px",background:x,boxShadow:z,transformOrigin:"left",transform:"rotate("+~~(360/q.lines*t+q.rotate)+"deg) translate("+q.radius+"px,0)",borderRadius:(q.corners*q.width>>1)+"px"})}for(var t=
0,w;t<q.lines;t++){w=j(c(),{position:"absolute",top:1+~(q.width/2)+"px",transform:q.hwaccel?"translate3d(0,0,0)":"",opacity:q.opacity,animation:k&&d(q.opacity,q.trail,t,q.lines)+" "+1/q.speed+"s linear infinite"});q.shadow&&e(w,j(s("#000","0 0 4px #000"),{top:"2px"}));e(r,e(w,s(q.color,"0 0 1px rgba(0,0,0,.1)")))}return r},opacity:function(r,q,s){q<r.childNodes.length&&(r.childNodes[q].style.opacity=s)}});(function(){function r(s,t){return c("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',
t)}var q=j(c("group"),{behavior:"url(#default#VML)"});!h(q,"transform")&&q.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),v.prototype.lines=function(s,t){function w(){return j(r("group",{coordsize:A+" "+A,coordorigin:-z+" "+-z}),{width:A,height:A})}function x(D,E,F){e(B,e(j(w(),{rotation:360/t.lines*D+"deg",left:~~E}),e(j(r("roundrect",{arcsize:t.corners}),{width:z,height:t.width,left:t.radius,top:-t.width>>1,filter:F}),r("fill",{color:t.color,opacity:t.opacity}),r("stroke",{opacity:0}))))}
var z=t.length+t.width,A=2*z,y=-(t.width+t.length)*2+"px",B=j(w(),{position:"absolute",top:y,left:y});if(t.shadow)for(y=1;y<=t.lines;y++)x(y,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(y=1;y<=t.lines;y++)x(y);return e(s,B)},v.prototype.opacity=function(s,t,w,x){s=s.firstChild;x=x.shadow&&x.lines||0;s&&t+x<s.childNodes.length&&(s=s&&s.firstChild,s&&(s.opacity=w))}):k=h(q,"animation")})();typeof define=="function"&&define.amd?define(function(){return v}):
g.Spinner=v})(window,document);
(function(g){g.fn.tn3.Imager=function(b,a,c){this.$c=b;this.data=a;this.config=g.extend(true,{},g.fn.tn3.Imager.config,c);this.init()};g.fn.tn3.Imager.config={transitions:null,defaultTransition:{type:"slide"},random:false,cssID:"tn3",maxZoom:1.4,crop:false,clickEvent:"click",idleDelay:3E3,stretch:true,dif:0};g.fn.tn3.Imager.prototype={config:null,$c:false,$ins:null,data:false,cached:null,active:-1,$active:false,$buffer:false,isInTransition:false,ts:null,cDim:null,qid:null,currentlyLoading:null,side:null,
$ic:null,$binder:null,infoID:null,lastEnter:false,mouseCoor:{x:0,y:0},mouseIsOver:false,init:function(){this.$c.css("overflow","hidden");this.$c.css("position","relative");this.$ins=g('<div class="'+this.config.cssID+'-image-ins" style="position:absolute;width:100%;height:100%;"></div>');this.$c.prepend(this.$ins);this.bindMouseEvents(this.$c);this.cached=[];this.ts=new g.fn.tn3.Transitions(this.config.transitions,this.config.defaultTransition,this.config.random,this,"onTransitionEnd")},bindMouseEvents:function(b){this.unbindMouseEvents();
var a=this;b.hover(function(){a.mouseIsOver=true;a.enterLeave("enter");a.startIdle();g(document).mousemove(g.proxy(a.onMouseMove,a))},function(){a.mouseIsOver=false;a.enterLeave("leave");a.stopIdle();g(document).unbind("mousemove",a.onMouseMove)});b[this.config.clickEvent](function(c){a.active==-1||a.isInTransition||c.target.tagName.toUpperCase()!="A"&&a.trigger("click",{n:a.active})});this.$binder=b},unbindMouseEvents:function(){this.$binder&&this.$binder.unbind("mouseenter mouseleave "+this.config.clickEvent);
g(document).unbind("mousemove",this.onMouseMove);this.stopIdle()},startIdle:function(){this.stopIdle();var b=this;if(this.config.idleDelay>0)this.infoID=setTimeout(function(){b.enterLeave("leave");b.stopIdle()},this.config.idleDelay)},onMouseMove:function(b){this.mouseCoor={x:b.pageX,y:b.pageY};if(!this.isInTransition){this.infoID||this.enterLeave("enter");this.startIdle()}},stopIdle:function(){clearTimeout(this.infoID);this.infoID=null},enterLeave:function(b){this.lastEnter!=b&&this.trigger(b);this.lastEnter=
b},show:function(b){if(this.isInTransition)this.qid=b;else{this.qid=null;if(b=="next"){b=this.active+1<this.data.length?this.active+1:0;this.side="left"}else if(b=="prev"){b=this.active>0?this.active-1:this.data.length-1;this.side="right"}else this.side=this.active>b?"right":"left";if(this.data[b]){this.trigger("load_start",{n:b});this.$buffer=g('<div class="'+this.config.cssID+'-image-in" style="position:absolute;overflow:hidden;"></div>');this.$buffer.css("visibility","hidden");this.$ins.prepend(this.$buffer);
if(this.cached[this.currentlyLoading]!=undefined)this.cached[this.currentlyLoading].init=false;if(this.cached[b]!=undefined)if(this.cached[b].status=="loaded")this.initImage(b);else{this.cached[b].init=true;this.currentlyLoading=b}else this.startLoading(b,true)}}},startLoading:function(b,a){var c=typeof b=="number"?b:b=="next"?this.active+1:this.active-1;if(!(this.cached[c]!=undefined&&this.cached[c].status=="loaded"||this.data[c]==undefined)){this.cached[c]={isImage:true,status:"loading",init:a};
this.currentlyLoading=c;if(this.data[c].content!=undefined){this.cached[c].isImage=false;this.onCacheLoad(g(g.trim(this.data[c].content)),c)}else this.cached[c].loader=new g.fn.tn3.ImageLoader(this.data[c].img,this,this.onCacheLoad,[c])}},onCacheLoad:function(b,a,c){this.cached[a].status="loaded";this.cached[a].isImage&&b.attr("alt",this.data[a].alt);this.cached[a].$content=b;c&&this.trigger("error",{description:c,n:a});this.cached[a].init&&this.initImage(a)},initImage:function(b){var a=this.cached[b].$content;
this.currentlyLoading=null;this.active=b;if(!this.cDim)this.cDim={w:this.$c.width(),h:this.$c.height()};this.$buffer.width(this.cDim.w).height(this.cDim.h);var c=g('<div class="'+this.config.cssID+'-full-image" style="position:absolute"></div>');a.appendTo(c);this.$buffer.append(c);this.$buffer.data("ic",c);this.$buffer.data("img",a);this.resize(this.$buffer);c=[true];this.trigger("load_end",{n:b,content:a,isImage:this.cached[b].isImage,doTransition:c});c[0]&&this.initTransition()},initTransition:function(){this.$buffer.css("visibility",
"visible");if(this.$active!=false){this.isInTransition=true;this.unbindMouseEvents();if(this.mouseIsOver)g(document).mousemove(g.proxy(this.onMouseMove,this));else this.mouseCoor={x:0,y:0};this.lastEnter="leave";this.ts.start(this.$active,this.$buffer,this.side)}else{this.$active=this.$buffer;this.trigger("transition",{n:this.active})}this.startLoading(this.side=="right"?"prev":"next",false)},setSize:function(b,a){this.isInTransition&&this.ts.stop(this.$active,this.$buffer,this.ts.config);this.$c.width(b).height(a);
this.cDim={w:this.$c.width(),h:this.$c.height()};if(this.$active){this.$active.width(b).height(a);this.resize(this.$active)}},resize:function(b){if(b.data("img")==undefined)this.trigger("resize",{w:this.cDim.w,h:this.cDim.h,left:0,top:0});else this.cached[this.active].isImage?this.resizeImage(b):this.resizeContent(b)},resizeImage:function(b){$img=b.data("img");$ic=b.data("ic");$img.width("auto").height("auto");b.data("scaled",false);var a=$img.width(),c=$img.height(),e=0,d=0,h={w:a,h:c,left:0,top:0};
$img.attr("width",a).attr("height",c);if($img.get(0).tagName.toUpperCase()=="IMG"&&(a!=this.cDim.w||c!=this.cDim.h)){e=this.cDim.w/a;d=this.cDim.h/c;e=this.config.crop?Math.max(e,d):Math.min(e,d);e=Math.min(this.config.maxZoom,e);a=h.w=Math.round(a*e)-this.config.dif;c=h.h=Math.round(c*e)-this.config.dif;if(this.cDim.w>=a)e=h.left=(this.cDim.w-a)/2;else{e=-(a-this.cDim.w)*0.5;h.w=this.cDim.w}if(this.cDim.h>c)d=h.top=(this.cDim.h-c)/2;else{d=-(c-this.cDim.h)*0.5;h.h=this.cDim.h}$img.width(a).height(c);
$img.attr("width",a).attr("height",c);$ic.width(a).height(c);b.data("scaled",true)}$ic.css("left",e).css("top",d);this.bindMouseEvents($ic);this.trigger("resize",h)},resizeContent:function(b){$ic=b.data("ic");$img=b.data("img");b.data("scaled",false);var a=$img.width(),c=$img.height(),e={w:a,h:c,left:0,top:0};if(this.config.stretch){$ic.width(this.cDim.w).height(this.cDim.h);$img.width(this.cDim.w).height(this.cDim.h);b.data("scaled",true)}else{e.left=(this.cDim.w-a)*0.5;e.top=(this.cDim.h-c)*0.5;
$ic.css("left",e.left).css("top",e.top)}this.bindMouseEvents($ic);this.trigger("resize",e)},onTransitionEnd:function(){this.$active.remove();this.$active=this.$buffer;this.$active.css("width","+=1");this.isInTransition=false;this.trigger("transition",{n:this.active});this.bindMouseEvents(this.$binder);var b=this.$binder.offset();this.mouseIsOver=false;if(this.mouseCoor.x>=b.left&&this.mouseCoor.x<=b.left+this.$binder.width())if(this.mouseCoor.y>=b.top&&this.mouseCoor.y<=b.top+this.$binder.height()){this.lastEnter=
"leave";this.enterLeave("enter");this.startIdle();this.mouseIsOver=true;g(document).mousemove(g.proxy(this.onMouseMove,this))}this.qid!=null&&this.show(this.qid)},trigger:function(b,a){var c=g.Event("img_"+b),e;for(e in a)c[e]=a[e];c.source=this;this.$c.trigger(c);this.config[b]&&this.config[b].call(this,c)},destroy:function(){this.isInTransition&&this.ts.stop(this.$active,this.$buffer);this.$active&&this.$active.remove();this.$buffer.remove()},rebuild:function(b){this.quid=null;this.isInTransition&&
this.ts.stop(this.$active,this.$buffer);this.$buffer&&this.$buffer.remove();this.cached=[];this.data=b;this.loader&&this.loader.cancel()}}})(jQuery);
(function(g){g.fn.tn3.Thumbnailer=function(b,a,c){this.$c=b;this.data=a;this.config=g.extend({},g.fn.tn3.Thumbnailer.config,c);g(window).resize(g.proxy(this.onWinResize,this));this.init()};g.fn.tn3.Thumbnailer.config={overMove:true,buffer:20,speed:8,slowdown:50,shaderColor:"#000000",shaderOpacity:0.5,shaderDuration:300,shaderOut:300,useTitle:false,seqLoad:true,align:1,mode:"thumbs",cssID:"tn3"};g.fn.tn3.Thumbnailer.prototype={config:null,$c:null,$oc:null,$ul:null,data:null,active:-1,listSize:0,containerSize:0,
containerPadding:0,noBufSize:0,containerOffset:0,mcoor:"mouseX",edge:"left",size:"width",outerSize:"outerWidth",mouseX:0,mouseY:0,intID:false,pos:0,difference:0,cnt:1,thumbCount:-1,initialized:false,clickWhenReady:-1,loaders:null,lis:null,isVertical:null,marginDif:0,nloaded:0,firstToLoad:0,isTouch:false,init:function(){this.$c.css("position","absolute").css("cursor","progress");this.lis=[];this.loaders=[];this.initialized=false;this.$oc=g("<div />");this.$ul=g("<ul />");this.$oc.appendTo(this.$c);
this.$oc.css("position","absolute").css("overflow","hidden").width(this.$c.width()).height(this.$c.height());this.$ul.appendTo(this.$oc);this.$ul.css("position","relative").css("margin","0px").css("padding","0px").css("border-width","0px").css("width","12000px").css("list-style","none");if(this.isVertical==null){if(this.isVertical=this.$c.width()<this.$c.height()){this.mcoor="mouseY";this.edge="top";this.size="height";this.outerSize="outerHeight"}else{this.mcoor="mouseX";this.edge="left";this.size=
"width";this.outerSize="outerWidth"}this.containerSize=this.$oc[this.size]();this.noBufSize=this.containerSize-2*this.config.buffer;this.containerOffset=this.$oc.offset()[this.edge];this.containerPadding=parseInt(this.$c.css("padding-"+this.edge))}this.listSize=0;if(navigator.userAgent.indexOf("MSIE")!=-1)this.config.seqLoad=false;this.data.length>0&&this.loadNextThumb()},loadNextThumb:function(){this.thumbCount++;var b=g("<li></li>");this.$ul.append(b);if(this.config.mode=="thumbs"){var a=this.data[this.thumbCount].thumb;
if(a){this.loaders.push(new g.fn.tn3.ImageLoader(a,this,this.onLoadThumb,[b,this.thumbCount]));!this.config.seqLoad&&this.thumbCount<this.data.length-1&&this.loadNextThumb();return}else this.config.mode="bullets"}this.config.mode=="numbers"&&b.text(this.thumbCount+1);this.onLoadThumb(null,b,this.thumbCount)},onLoadThumb:function(b,a,c,e){this.lis[c]={li:a};a.addClass(this.config.cssID+"-thumb");a.css("float",this.isVertical?"none":"left");if(b){var d=this.lis[c].thumb=g(b);a.append(d);this.lis[c].pos=
a.position()[this.edge]}this.config.useTitle&&this.data[c].title&&a.attr("title",this.data[c].title.replace(/\&amp;/g,"&"));if(this.config.mode=="thumbs"&&this.config.shaderOpacity>0){this.lis[c].shade=g("<div/>");a.prepend(this.lis[c].shade);this.lis[c].shade.css("background-color",this.config.shaderColor).css("width",d.width()).css("height",d.height()).css("position","absolute")}this.initThumb(c);a.css("opacity",0);a.animate({opacity:1},1E3);this.listSize+=a[this.outerSize](true);if(!this.initialized){this.firstToLoad=
c;this.initialized=true;this.initMouse(true)}e&&this.trigger("error",{description:e,n:c});this.trigger("thumbLoad",{n:c});this.nloaded++;if(this.nloaded<this.data.length){if(this.config.seqLoad||this.config.mode!="thumbs")this.loadNextThumb()}else{if(b)this.loaders=null;if(!this.config.seqLoad)for(b=0;b<this.lis.length;b++)this.lis[b].pos=this.lis[b].li.position()[this.edge];this.thumbsLoaded()}if(this.clickWhenReady==c){this.clickWhenReady=-1;this.thumbClick(c)}},initThumb:function(b){var a=this.lis[b];
if(a.li){a.li.removeClass().addClass(this.config.cssID+"-thumb");if(a.shade){a.shade.stop();a.shade.css("opacity",this.config.shaderOpacity)}var c=this;a.li.click(function(){c.thumbClick(b);c.trigger("click",{n:b});return false});this.config.mode!="thumbs"&&a.li.hover(function(){c.mouseOver(b)},function(){c.mouseOver(-1)})}},lastOver:-1,mouseOver:function(b){if(b!=this.lastOver){if(this.lastOver!=-1&&this.lastOver!=this.active){a=this.lis[this.lastOver];a.li.removeClass(this.config.cssID+"-thumb-over");
if(a.shade){a.shade.stop();a.shade.animate({opacity:this.config.shaderOpacity},{duration:this.config.shaderOut,easing:"easeOutCubic",queue:false})}this.trigger("thumbOut",{n:b})}this.lastOver=b;if(!(b==-1||b==this.active)){var a=this.lis[b];a.li.addClass(this.config.cssID+"-thumb-over");if(a.shade){a.shade.stop();a.shade.animate({opacity:0},{duration:this.config.shaderDuration,easing:"easeOutCubic",queue:false})}this.trigger("thumbOver",{n:b})}}},next:function(b){if(b)this.listSize>this.containerSize&&
this.move(this.$ul.position()[this.edge]-this.containerSize);else{b=this.active+1;if(this.active==-1||this.active+1==this.data.length)b=0;this.thumbClick(b)}},prev:function(b){if(b)this.listSize>this.containerSize&&this.move(this.$ul.position()[this.edge]+this.containerSize);else{b=this.active-1;if(this.active==-1||this.active==0)b=this.data.length-1;this.thumbClick(b)}},move:function(b){var a={};a[this.edge]=Math.min(0,Math.max(b,-(this.listSize-this.containerSize)));this.$ul.stop();this.$ul.animate(a,
300)},thumbClick:function(b){if(this.active==-1){if(this.thumbCount<b||b>this.lis.length-1||this.lis[b]==null){this.clickWhenReady=b;return}}else if(b==this.active)return;else this.initThumb(this.active);if(b=="next")b=this.active+1<this.data.length?this.active+1:0;else if(b=="prev")b=this.active>0?this.active-1:this.data.length-1;if(this.lis[b]){var a=this.lis[b];a.li.addClass(this.config.cssID+"-thumb-selected").unbind("click mouseenter mouseleave");a.shade&&a.shade.animate({opacity:0},this.config.shaderDuration);
this.active=b;this.centerActive()}},centerActive:function(b){if(this.active!=-1){var a=this.lis[this.active].li,c=this.$ul.position()[this.edge]+a.position()[this.edge],e=a[this.outerSize]()/2;if(c+e>this.containerSize||c+e<0){a=10-a.position()[this.edge]+this.containerSize/2-e;a=Math.min(0,a);a=Math.max(a,-this.listSize+this.containerSize);c={};c[this.edge]=a;if(this.isTouch)this.$oc["scroll"+this.edge.substring(0,1).toUpperCase()+this.edge.substring(1)](-a);else b?this.$ul.css(c):this.$ul.animate(c,
200)}}},thumbsLoaded:function(){this.$c.css("cursor","auto");this.$ul.css("width",this.listSize+"px");this.centerList();this.trigger("load")},centerList:function(b){if(this.listSize<this.containerSize){var a={};a[this.edge]=this.config.align?this.config.align==1?(this.containerSize-this.listSize)/2:this.containerSize-this.listSize:0;b||this.config.mode!="thumbs"?this.$ul.css(a):this.$ul.animate(a,300)}else{this.centerActive(b);if(this.$ul.position()[this.edge]>0)this.$ul.css(this.edge,0);else this.$ul.position()[this.edge]+
this.listSize<this.containerSize&&this.$ul.css(this.edge,-(this.listSize-this.containerSize))}},initMouse:function(b){if(this.config.mode=="thumbs"){b=b?"bind":"unbind";this.$oc[b]("mouseenter",g.proxy(this.mouseenter,this));this.$oc[b]("mouseleave",g.proxy(this.mouseleave,this))}},mouseenter:function(){this.trigger("over");clearInterval(this.intID);var b=this;this.$ul.stop();this.$c.mousemove(this.mcoor=="mouseX"?function(a){b.mouseX=a.pageX-b.containerOffset}:function(a){b.mouseY=a.pageY-b.containerOffset});
this.marginDif=parseInt(this.lis[this.firstToLoad].li.css("margin-"+this.edge));if(isNaN(this.marginDif))this.marginDif=0;b.intID=this.listSize>this.containerSize&&this.config.overMove?setInterval(function(){b.slide.call(b)},10):setInterval(function(){b.mouseTrack.call(b)},10)},mouseleave:function(){this.trigger("out");this.$c.unbind("mousemove");clearInterval(this.intID);var b=this;this.intID=setInterval(function(){b.slideOut.call(b)},10);this.mouseOver(-1)},slide:function(){this.cnt=1;var b=this[this.mcoor];
if(b<=this.config.buffer)this.pos=0;else if(b>=this.containerSize-this.config.buffer)this.pos=this.containerSize-this.listSize-1;else{var a=this.containerSize*(b-this.config.buffer);a/=this.noBufSize;this.pos=a*(1-this.listSize/this.containerSize)}for(a=this.lis.length-1;a>-1;a--){var c=b-this.prevdx;if(c>=this.lis[a].pos&&c<this.lis[a].pos+this.lis[a].li[this.size]()){this.mouseOver(a);break}}b=this.prevdx-this.marginDif;this.difference=b-this.pos;b=Math.round(b-this.difference/this.config.speed);
if(this.prevdx!=b){this.$ul.css(this.edge,b);this.prevdx=b}},prevdx:0,mouseTrack:function(){for(var b=this[this.mcoor],a=this.lis.length-1;a>-1;a--){var c=b-this.$ul.position()[this.edge];if(c>=this.lis[a].pos&&c<this.lis[a].pos+this.lis[a].li[this.size]()){this.mouseOver(a);break}}},clickOn:function(b){b=b[this.edge]-this.$ul.position()[this.edge]-this.$c.offset()[this.edge];for(var a=0;a<this.lis.length;a++){lpos=this.lis[a].li.position()[this.edge];if(b>=lpos&&b<lpos+this.lis[a].li[this.size]()){this.lis[a].li.click();
break}}},slideOut:function(){if(this.config.slowdown!=0&&this.difference!=0){var b=this.$ul.position()[this.edge];this.difference=b-this.pos;this.$ul.css(this.edge,b-this.difference/(this.config.speed*this.cnt));this.cnt*=1+4/this.config.slowdown;if(this.cnt>=40){this.difference=0;this.cnt=1}}else{clearInterval(this.intID);this.intID=null}},trigger:function(b,a){var c=g.Event("tn_"+b),e;for(e in a)c[e]=a[e];c.source=this;this.$c.trigger(c);this.config[b]&&this.config[b].call(this,c)},destroy:function(){clearInterval(this.intID);
this.$c.empty()},rebuild:function(b){clearInterval(this.intID);this.$c.empty();this.data=b;this.active=this.thumbCount=-1;this.nloaded=0;this.initMouse(false);this.loaders!==null&&g.each(this.loaders,function(a,c){c.cancel()});this.init()},setSize:function(b,a){if(this.config.mode=="thumbs"){this.isVertical?this.$c.height(a):this.$c.width(b);this.$oc.width(this.$c.width()).height(this.$c.height());this.containerSize=this.$oc[this.size]();this.noBufSize=this.containerSize-2*this.config.buffer;this.containerOffset=
this.$oc.offset()[this.edge];this.initMouse(true);this.loaders===null&&this.centerList(true)}},onWinResize:function(){this.containerOffset=this.$oc.offset()[this.edge]}}})(jQuery);
(function(g){g.fn.tn3.altLink=null;g.fn.tn3.ImageLoader=function(b,a,c,e){this.$img=g(new Image);e.unshift(this.$img);this.altLink=g.fn.tn3.altLink;a={url:b,context:a,callback:c,args:e};this.$img.bind("load",a,this.load);this.$img.bind("error",a,g.proxy(this.error,this));this.$img.attr("src",b)};g.fn.tn3.ImageLoader.prototype={$img:null,altLink:null,load:function(b){b.data.callback.apply(b.data.context,b.data.args);b.data.args[0].unbind("load").unbind("error")},error:function(b){if(this.altLink){this.altLink=
null;this.$img.attr("src",g.fn.tn3.altLink+b.data.url)}else{b.data.args.push("image loading error: "+b.data.url);b.data.callback.apply(b.data.context,b.data.args);this.$img.unbind("load").unbind("error")}},cancel:function(){this.$img.unbind("load").unbind("error")}}})(jQuery);
(function(g){g.fn.tn3.Timer=function(b,a,c){this.$target=b;this.duration=a;this.tickint=c};g.fn.tn3.Timer.prototype={$target:null,duration:null,id:null,runs:false,counter:null,countDuration:null,tickid:null,ticks:null,tickint:500,start:function(){if(!this.runs){this.runs=true;this.startCount(this.duration);this.trigger("timer_start")}},startCount:function(b){this.clean();this.countDuration=b;this.counter=+new Date;var a=this;this.id=setTimeout(function(){a.clean.call(a);a.runs=false;a.trigger.call(a,
"timer_end")},b);var c=this.duration/this.tickint;this.ticks=Math.round(b/c);this.tickid=setInterval(function(){a.ticks=Math.ceil((b-new Date+a.counter)/c);a.ticks>0&&a.trigger.call(a,"timer_tick",{tick:a.ticks,totalTicks:a.tickint})},c);this.trigger("timer_start");this.trigger("timer_tick",{tick:this.ticks,totalTicks:this.tickint})},stop:function(){this.clean();this.runs=false;this.trigger("timer_stop")},clean:function(){clearTimeout(this.id);this.id=null;clearInterval(this.tickid);this.elapsed=
this.tickid=null},elapsed:null,pause:function(b){if(this.runs){if(b){this.clean();var a=this.duration/this.tickint;this.elapsed=Math.floor((+new Date-this.counter)/a)*a}else{if(this.elapsed==null)return;this.startCount(this.countDuration-this.elapsed);this.elapsed=null}this.trigger("timer_pause",{pause:b})}},trigger:function(b,a){var c=g.Event(b),e;for(e in a)c[e]=a[e];this.$target.trigger(c)}}})(jQuery);
(function(g){g.fn.tn3.Albums=function(b,a,c){this.data=b;this.$c=a;this.$in=a.find("."+c+"-inalbums");this.cssID=c;this.$a=this.$in.find("."+this.cssID+"-album");this.n=0;this.initValues={width:a.width(),height:a.height(),aw:this.$a.width(),ah:this.$a.height(),inw:this.$in.width(),inh:this.$in.height()};this.pad=parseInt(this.$in.css("padding-left"));this.isTouch="ontouchstart"in window};g.fn.tn3.Albums.prototype={data:null,$c:null,$in:null,$a:null,initValues:null,p:null,aw:null,ah:null,cssID:null,
coors:null,ctrl_next:null,ctrl_prev:null,n:null,selected:null,pad:null,enabled:false,space:null,isTouch:false,btnar:null,albh:0,lastac:null,getButtons:function(){this.$in.empty();this.btnar=[];$cur=this.$a.clone();$cur.appendTo(this.$in);this.space=this.space===null?this.pad:this.space;var b=this.aw=this.$in.width(),a=this.$in.height(),c=1;c=this.data.length;if(!this.isTouch){b-=2*this.pad;a-=2*this.pad;c=Math.max(1,Math.floor(b/this.initValues.aw));this.aw=Math.floor((b-(c-1)*this.space)/c);c=Math.floor(a/
this.initValues.ah)}this.ah=this.initValues.ah;a=b=this.pad;if(this.isTouch){this.$c.css("overflow","hidden");for(var e=0;e<c;e++){this.btnar.push($cur);$cur.css("left",b).css("top",a);$cur.css("width","100%").height(this.ah);$cur.hide();$cur=this.$a.clone();$cur.appendTo(this.$in);a+=this.ah+this.space}}else for(;a+this.ah<this.$in.height();){for(;b+this.aw<this.$in.width();){this.btnar.push($cur);$cur.css("left",b).css("top",a);$cur.width(this.aw).height(this.ah);$cur.hide();$cur=this.$a.clone();
$cur.appendTo(this.$in);b+=this.aw+this.space}a+=this.ah+this.space;b=this.pad}this.albh=a;$cur.remove();return this.btnar},show:function(b,a,c,e){this.$c.show();this.enabled=true;if(this.isTouch&&this.btnar){if(a!=undefined){this.btnar[this.selected].removeClass(this.cssID+"-album-selected");this.selected=a;for(b=0;b<this.data.length;b++)if(b==this.selected){this.btnar[b].addClass(this.cssID+"-album-selected");this.$in.scrollTop(this.btnar[b].position().top-this.btnar[b].height()*1.5);break}}}else{if(b==
undefined)b=0;else if(b=="next")b=this.n+1<this.data.length?this.n+1:0;else if(b=="prev")b=this.n>0?this.n-1:this.data.length-1;if(a!=undefined)this.selected=a;var d,h,j=this.getButtons();if(e&&a!==null)for(;j.length*(b+1)<a;)b++;var f=this;a=b*j.length;e=Math.min(this.data.length,(b+1)*j.length);this.trigger("init");for(var m=a;m<e;m++){var i=this.data[m];if(!i.title)i.title="Unknown";d=j[m-a];h='<div class="'+this.cssID+'-album-image"></div>';h+='<div class="'+this.cssID+'-album-title">'+i.title+
"</div>";if(i.description)h+='<div class="'+this.cssID+'-album-description">'+i.description+"</div>";d.html(h);new g.fn.tn3.ImageLoader(i.thumb,this,this.onThumbLoad,[d.find("."+this.cssID+"-album-image")]);d.data("tn3",m);this.trigger("binit",{$a:d});d.click(function(){var k=g(this).data("tn3");if(k==f.selected){f.$c.hide();f.trigger("close")}else f.trigger("click",{n:k})}).hover(function(){g(this).addClass(f.cssID+"-album-over")},function(){g(this).removeClass(f.cssID+"-album-over")});m==this.selected&&
d.addClass(this.cssID+"-album-selected")}this.lastac=d;d=m%j.length;if(d!=0)for(h=j.length-1;h>=d;h--)j.splice(h,1);this.n=b;if(c)g.each(j,function(k){j[k].show()});else{var l=800/j.length;this.$c.slideDown(b==0?300:0,function(){g.each(j,function(k){j[k].delay(k*l).fadeIn(150)})})}this.ctrl_prev&&this.enablePageControl("prev",a>0);this.ctrl_next&&this.enablePageControl("next",e<this.data.length);if(this.ctrl_close)this.ctrl_close.css("display",this.selected===null?"none":"inline")}},onThumbLoad:function(b,
a,c){c&&this.trigger("error",{description:c});a.prepend(b)},hide:function(){this.$c.hide();this.enabled=false},enablePageControl:function(b,a){var c=this["ctrl_"+b];if(a){if(!c.data("active")){var e=this;c.click(function(d){e.show(b);d.stopPropagation()}).hover(function(){g(this).addClass(e.cssID+"-albums-"+b+"-over")},function(){g(this).removeClass(e.cssID+"-albums-"+b+"-over")});c.data("active",true)}}else{c.removeClass(this.cssID+"-albums-"+b+"-over");c.unbind();c.data("active",false)}},setControl:function(b,
a){if(b=="close"){var c=this;a.click(function(e){c.$c.hide();c.trigger("close");e.stopPropagation()})}this["ctrl_"+b]=a},trigger:function(b,a){var c=g.Event("albums_"+b),e;for(e in a)c[e]=a[e];c.source=this;this.$c.trigger(c)},clickOn:function(b){var a=-(this.$in.position().top+this.pad),c=this.btnar[0].height()+this.pad;this.trigger("click",{n:Math.floor((a+b.top)/c)})},changeSize:function(b,a){this.$c.width(this.initValues.width+b).height(this.initValues.height+a);this.isTouch?this.$in.width(this.initValues.inw+
b):this.$in.width(this.initValues.inw+b).height(this.initValues.inh+a);this.$c.css("display")!="none"&&this.show(undefined,undefined,true)},select:function(){}}})(jQuery);
(function(g){var b=g.fn.tn3.Transitions=function(c,e,d,h,j){this.ts=c;this.def=g.extend(true,{},this[e.type+"Config"],e);if(!c)this.ts=[this.def];for(var f in this.ts)this.ts[f]=g.extend(true,{},this[this.ts[f].type+"Config"],this.ts[f]);this.random=d;this.end=g.proxy(h,j)},a=b.prototype={ts:null,def:{type:"slide"},random:false,gs:[],end:null,ct:null,counter:-1,setTransition:function(){if(this.ts.length==1)this.ct=this.ts[0];else{this.counter++;if(this.counter==this.ts.length)this.counter=0;this.random&&
this.counter==0&&g.fn.tn3utils.shuffle(this.ts);this.ct=this.ts[this.counter]}},start:function(c,e,d){this.setTransition();if(this[this.ct.type+"Condition"]!==undefined&&!this[this.ct.type+"Condition"](c,e,this.ct))this.ct=this.def;this[this.ct.type](c,e,this.ct,d)},stop:function(c,e){this[this.ct.type+"Stop"](c,e,this.ct)},makeGrid:function(c,e,d){var h=c.width(),j=Math.round(h/e);h=h-j*e;var f=c.height(),m=Math.round(f/d);f=f-m*d;var i,l,k,p,u,v=0,r=0,q="url("+c.find("img").attr("src")+") no-repeat scroll -";
for(i=0;i<e;i++){this.gs[i]=[];p=h>i?j+1:j;for(l=0;l<d;l++){k=c.append("<div></div>").find(":last");u=f>l?m+1:m;k.width(p).height(u).css("background",q+v+"px -"+r+"px").css("left",v).css("top",r).css("position","absolute");this.gs[i].push(k);r+=u}v+=p;r=0}c.find("img").remove()},stopGrid:function(){for(var c=0;c<this.gs.length;c++)for(var e=0;e<this.gs[c].length;e++){this.gs[c][e].clearQueue();this.gs[c][e].remove()}this.gs=[]},flatSort:function(c){for(var e=[],d=0;d<this.gs.length;d++)for(var h=
0;h<this.gs[d].length;h++)e.push(this.gs[d][h]);c&&e.reverse();return e},randomSort:function(){var c=this.flatSort();g.fn.tn3utils.shuffle(c);return c},diagonalSort:function(c,e){for(var d=[],h=c>0?this.gs.length-1:0,j=e>0?0:this.gs[0].length-1;this.gs[h];){d.push(this.addDiagonal([],h,j,c,e));h-=c}h+=c;for(j+=e;this.gs[h][j];){d.push(this.addDiagonal([],h,j,c,e));j+=e}return d},addDiagonal:function(c,e,d,h,j){c.push(this.gs[e][d]);return this.gs[e+h]&&this.gs[e+h][d+j]?this.addDiagonal(c,e+h,d+j,
h,j):c},circleSort:function(c){var e=[],d=this.gs.length,h=this.gs[0].length,j=[Math.floor(d/2),Math.floor(h/2)];d=d*h;h=[[1,0],[0,1],[-1,0],[0,-1]];var f=0,m=0,i;for(e.push(this.gs[j[0]][j[1]]);e.length<d;){for(i=0;i<=f;i++)this.addGridPiece(e,j,h[m]);if(m==h.length-1)m=0;else m++;f+=0.5}c&&e.reverse();return e},addGridPiece:function(c,e,d){e[0]+=d[0];e[1]+=d[1];this.gs[e[0]]&&this.gs[e[0]][e[1]]&&c.push(this.gs[e[0]][e[1]])},getSlidePositions:function(c,e){var d={dir:e};switch(e){case "left":d.pos=
c.outerWidth(true);break;case "right":d.pos=-c.outerWidth(true);d.dir="left";break;case "top":d.pos=-c.outerHeight(true);break;case "bottom":d.pos=c.outerHeight(true);d.dir="top"}return d},animateGrid:function(c,e,d,h,j,f,m){var i={duration:h,easing:d,complete:function(){g(this).remove()}};for(d=0;d<c.length;d++){h=g.easing[j](0,d,0,f,c.length);if(d==c.length-1){var l=this;i.complete=function(){g(this).remove();m.call(l)}}if(g.isArray(c[d]))for(var k in c[d])c[d][k].delay(h).animate(e[d],i);else c[d].delay(h).animate(e[d],
i)}},getValueArray:function(c,e,d){var h=[],j=g.isArray(e),f=g.isArray(d),m;for(m=0;m<c;m++){o={};o[j?e[m%e.length]:e]=f?d[m%d.length]:d;h.push(o)}return h}};b.defined=[];b.define=function(c){for(var e in c)switch(e){case "type":b.defined.push(c.type);break;case "config":a[c.type+"Config"]=c.config;break;case "f":a[c.type]=c.f;break;case "stop":a[c.type+"Stop"]=c.stop;break;case "condition":a[c.type+"Condition"]=c.condition;break;default:a[e]=c[e]}};b.define({type:"none",config:{},f:function(){this.end()},
stop:function(){this.end()}});b.define({type:"fade",config:{duration:300,easing:"easeInQuad"},f:function(c,e,d){var h=this;c.animate({opacity:0},d.duration,d.easing,function(){h.end()})},stop:function(c){c.stop();this.end()}});b.define({type:"slide",config:{duration:300,direction:"auto",easing:"easeInOutCirc"},f:function(c,e,d,h){h=this.getSlidePositions(e,d.direction=="auto"?h:d.direction);var j={},f={};e.css(h.dir,h.pos);j[h.dir]=0;e.animate(j,d.duration,d.easing,this.end);f[h.dir]=-h.pos;c.animate(f,
d.duration,d.easing)},stop:function(c,e){e.stop();c.stop();c.css("left",0).css("top",0);e.css("left",0).css("top",0);this.end()}});b.define({type:"blinds",config:{duration:240,easing:"easeInQuad",direction:"vertical",parts:12,partDuration:100,partEasing:"easeInQuad",method:"fade",partDirection:"auto",cross:true},f:function(c,e,d,h){d.direction=="horizontal"?this.makeGrid(c,1,d.parts):this.makeGrid(c,d.parts,1);h=d.partDirection=="auto"?h:d.partDirection;c=this.flatSort(h=="left"||h=="top");var j;
switch(d.method){case "fade":j=this.getValueArray(c.length,"opacity",0);break;case "scale":j=this.getValueArray(c.length,h=="left"?"width":"height","1px");break;case "slide":e=this.getSlidePositions(e,h);j=this.getValueArray(c.length,e.dir,d.cross?[e.pos,-e.pos]:e.pos)}this.animateGrid(c,j,d.partEasing,d.partDuration,d.easing,d.duration,this.blindsStop)},stop:function(){this.stopGrid();this.end()},condition:function(c,e){return!c.data("scaled")||!e.data("scaled")}});b.define({type:"grid",config:{duration:260,
easing:"easeInQuad",gridX:7,gridY:5,sort:"diagonal",sortReverse:false,diagonalStart:"bl",method:"fade",partDuration:300,partEasing:"easeOutSine",partDirection:"left"},f:function(c,e,d,h){this.makeGrid(c,d.gridX,d.gridY);c=d.partDirection=="auto"?h:d.partDirection;var j,f;if(d.sort=="diagonal")switch(d.diagonalStart){case "tr":j=this.diagonalSort(1,1);break;case "tl":j=this.diagonalSort(-1,1);break;case "br":j=this.diagonalSort(1,-1);break;case "bl":j=this.diagonalSort(-1,-1)}else j=this[d.sort+"Sort"](d.sortReverse);
switch(d.method){case "fade":f=this.getValueArray(j.length,"opacity",0);break;case "scale":f=this.getValueArray(j.length,c=="left"?"width":"height","1px")}this.animateGrid(j,f,d.partEasing,d.partDuration,d.easing,d.duration,this.gridStop)},stop:function(){this.stopGrid();this.end()},condition:function(c,e){return!c.data("scaled")||!e.data("scaled")}})})(jQuery);
(function(g){function b(i){var l=i&&i.message!==undefined?i.message:undefined;i=g.extend({},g.tn3block.defaults,i||{});l=l===undefined?i.message:l;m&&a({});var k=i.baseZ,p=h||i.forceIframe?g('<iframe class="blockUI" style="z-index:'+k++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+i.iframeSrc+'"></iframe>'):g('<div class="blockUI" style="display:none"></div>'),u=g('<div class="blockUI '+i.cssID+'-overlay" style="z-index:'+k++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');
k=g('<div class="blockUI '+i.blockMsgClass+' blockPage" style="z-index:'+k+';display:none;position:fixed"></div>');k.css("left","0px").css("top","0px");u.css(i.overlayCSS);u.css("position","fixed");if(h||i.forceIframe)p.css("opacity",0);var v=[p,u,k],r=g("body");g.each(v,function(){this.appendTo(r)});v=f&&(!g.boxModel||g("object,embed",null).length>0);if(j||v){i.allowBodyStretch&&g.boxModel&&g("html,body").css("height","100%");g.each([p,u,k],function(q,s){var t=s[0].style;t.position="absolute";if(q<
2){t.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight)- (jQuery.boxModel?0:"+i.quirksmodeOffsetHack+') + "px"');t.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"')}else if(i.centerY){t.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2- (this.offsetHeight / 2)+ (blah = document.documentElement.scrollTop? document.documentElement.scrollTop: document.body.scrollTop)+ "px"');
t.marginTop=0}else i.centerY||t.setExpression("top",'(document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')})}if(l){l.data("blockUI.parent",l.parent());k.append(l);if(l.jquery||l.nodeType)g(l).show()}if((h||i.forceIframe)&&i.showOverlay)p.show();i.showOverlay&&u.show();l&&k.show();i.onBlock&&i.onBlock();e(1,i);m=l}function a(i){i=g.extend({},g.tn3block.defaults,i||{});e(0,i);var l=g("body").children().filter(".blockUI").add("body > .blockUI");
c(l,i)}function c(i,l){i.each(function(){this.parentNode&&this.parentNode.removeChild(this)});m.data("blockUI.parent").append(m);m=null;typeof l.onUnblock=="function"&&l.onUnblock.call(l.con)}function e(i,l){if(i||m)!l.bindEvents||i&&!l.showOverlay||(i?g(document).bind("mousedown mouseup keydown keypress",l,d):g(document).unbind("mousedown mouseup keydown keypress",d))}function d(i){var l=i.data;if(g(i.target).parents("div."+l.blockMsgClass).length>0)return true;return g(i.target).parents().children().filter("div.blockUI").length==
0}var h=/MSIE/.test(navigator.userAgent),j=/MSIE 6.0/.test(navigator.userAgent),f=g.isFunction(document.createElement("div").style.setExpression);g.tn3block=function(i){b(i)};g.tn3unblock=function(i){a(i)};var m=undefined;g.tn3block.defaults={message:"<h1>Please wait...</h1>",overlayCSS:{},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:2147483647,allowBodyStretch:true,bindEvents:true,showOverlay:true,applyPlatformOpacityRules:true,onBlock:null,
onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",cssID:"tn3"}})(jQuery);
(function(g){(g.fn.tn3.External=function(b,a){if(b){this.context=a;this.reqs=b.length;for(var c=0;c<b.length;c++)this.plugs[b[c].origin]=new g.fn.tn3.External[b[c].origin](b[c],this)}}).prototype={context:null,reqs:0,plugs:{},getImages:function(b,a){this.plugs[b.origin].getImages(b,a)},setAlbumData:function(b,a){this.reqs--;this.context.setAlbumData.call(this.context,b,a)},setImageData:function(b,a,c){this.context.setImageData.call(this.context,b,a,c)},getAlbumData:function(b){return this.context.data[b]}}})(jQuery);
(function(g){var b=g.fn.tn3.External;b.xml=function(a,c){this.extcon=c;this.config=g.extend(true,{},b.xml.config,a);if(a.noInit)c.reqs--;else this.init()};b.xml.config={url:"",thumb_size:1,image_size:0};b.xml.prototype={config:null,extcon:null,getImages:function(){},init:function(){this.request()},request:function(){g.ajax({url:this.config.url,cache:false,context:this,success:function(a){this.extcon.setAlbumData(this.parseXML(a))},error:function(){this.extcon.setAlbumData([],"XML loading failed")}})},
parseXML:function(a){try{var c=[],e=this,d,h,j;g(a).find(":first").children().each(function(m,i){d=g(this);c[m]={};c[m].adata={id:m,origin:"xml"};h=d.find("file_root").text();e.setProps(i,c[m],h);c[m].imgs=[];delete c[m].images;d.find("images > image").each(function(l,k){j=c[m].imgs[l]={};e.setProps(k,j,h)})})}catch(f){this.extcon.setAlbumData([],"XML parsing error")}return c},setProps:function(a,c,e){var d;g(a).children().each(function(h,j){if(j.firstChild){d=j.firstChild.nodeValue;n=j.tagName;if(n.substring(n.length-
3)=="src"){d=e+d;if(n=="image_src")n="img";else if(n=="thumb_src")n="thumb"}c[n]=d}});if(!c.thumb)c.thumb=this.getThumb(c.img,this.config.thumb_size);if(this.config.image_size>0)c.img=this.getThumb(c.img,this.config.image_size)},getThumb:function(a,c){if(!(!a||a=="")){if(c==undefined)c=1;else if(c==0)return a;var e=a.split("/"),d=e.pop().split("."),h=d.pop().toString();h=d.join(".")+"_"+c+"."+h.toLowerCase();return a=e.join("/")+"/thumbs/"+h}}}})(jQuery);
